# This file controls the behavior of the Grep converter
# (Plugin/DMU/Converter/Grep.php). Grep is basically a dumb search
# and replace.

definitions:
  # Certain common global variables were turned into service methods in
  # Drupal 8. Any globals listed here will be expanded into three forms:
  # global $var, $GLOBALS['var'], and $GlOBALS["var"], and each form will
  # be replaced with the replacement string. For example, global $user
  # will become \Drupal::currentUser().
  globals:
    language: '\Drupal::languageManager()->getCurrentLanguage()'
    theme: '\Drupal::theme()->getActiveTheme()->getName()'
    theme_key: '\Drupal::theme()->getActiveTheme()->getName()'
    user: '\Drupal::currentUser()'

  # Many Drupal 7 API functions were moved into service objects, but otherwise
  # left untouched. Those functions are listed here. Each function name will
  # be expanded into function(), then replaced with its replacement. You should
  # NOT include the parentheses in the replacement string. For example,
  # drupal_alter('baz', $my_baz) will be replaced with:
  # \Drupal::moduleHandler()->alter('baz', $my_baz)
  function_calls:
    check_plain: '\Drupal\Component\Utility\Html::escape'
    conf_path: '\Drupal\Core\DrupalKernel::findSitePath'
    current_path: '\Drupal\Core\Url::fromRoute("<current>")->toString'
    decode_entities: '\Drupal\Component\Utility\Html::decodeEntities'
    drupal_alter: '\Drupal::moduleHandler()->alter'
    drupal_array_merge_deep: '\Drupal\Component\Utility\NestedArray::mergeDeep'
    drupal_array_merge_deep_array: '\Drupal\Component\Utility\NestedArray::mergeDeepArray'
    drupal_array_get_nested_value: '\Drupal\Component\Utility\NestedArray::getValue'
    drupal_array_set_nested_value: '\Drupal\Component\Utility\NestedArray::setValue'
    drupal_array_unset_nested_value: '\Drupal\Component\Utility\NestedArray::unsetValue'
    drupal_array_nested_key_exists: '\Drupal\Component\Utility\NestedArray::keyExists'
    drupal_basename: '\Drupal::service("file_system")->basename'
    drupal_build_form: '\Drupal::formBuilder()->buildForm'
    drupal_chmod: '\Drupal::service("file_system")->chmod'
    drupal_clean_css_identifier: '\Drupal\Component\Utility\Html::cleanCssIdentifier'
    drupal_clear_css_cache: '\Drupal::service("asset.css.collection_optimizer")->deleteAll'
    drupal_clear_js_cache: '\Drupal::service("asset.js.collection.optimizer")->deleteAll'
    drupal_convert_to_utf8: '\Drupal\Component\Utility\Unicode::convertToUtf8'
    drupal_cron_run: '\Drupal::service("cron")->run'
    drupal_dirname: '\Drupal::service("file_system")->dirname'
    drupal_encode_path: '\Drupal\Component\Utility\UrlHelper::encodePath'
    drupal_form_submit: '\Drupal::formBuilder()->submitForm'
    drupal_get_form: '\Drupal::formBuilder()->getForm'
    drupal_get_query_parameters: '\Drupal\Component\Utility\UrlHelper::filterQueryParameters'
    drupal_hash_base64: '\Drupal\Component\Utility\Crypt::hashBase64'
    drupal_hmac_base64: '\Drupal\Component\Utility\Crypt::hmacBase64'
    drupal_html_class: '\Drupal\Component\Utility\Html::getClass'
    drupal_html_id: '\Drupal\Component\Utility\Html::getId'
    drupal_json_encode: '\Drupal\Component\Serialization\Json::encode'
    drupal_json_decode: '\Drupal\Component\Serialization\Json::decode'
    drupal_mkdir: '\Drupal::service("file_system")->mkdir'
    drupal_move_uploaded_file: '\Drupal::service("file_system")->moveUploadedFile'
    drupal_parse_dependency: '\Drupal\Core\Extension\ModuleHandler::parseDependency'
    drupal_parse_url: '\Drupal\Component\Utility\UrlHelper::parse'
    drupal_prepare_form: '\Drupal::formBuilder()->prepareForm'
    drupal_process_form: '\Drupal::formBuilder()->processForm'
    drupal_random_bytes: '\Drupal\Component\Utility\Crypt::randomBytes'
    drupal_realpath: '\Drupal::service("file_system")->realpath'
    drupal_rebuild_form: '\Drupal::formBuilder()->rebuildForm'
    drupal_redirect_form: '\Drupal::formBuilder()->redirectForm'
    drupal_render: '\Drupal::service("renderer")->render'
    drupal_retrieve_form: '\Drupal::formBuilder()->retrieveForm'
    drupal_rmdir: '\Drupal::service("file_system")->rmdir'
    drupal_strlen: '\Drupal\Component\Utility\Unicode::strlen'
    drupal_strtolower: '\Drupal\Component\Utility\Unicode::strtolower'
    drupal_strtoupper: '\Drupal\Component\Utility\Unicode::strtoupper'
    drupal_substr: '\Drupal\Component\Utility\Unicode::substr'
    drupal_tempnam: '\Drupal::service("file_system")->tempnam'
    drupal_truncate_bytes: '\Drupal\Component\Utility\Unicode::truncateBytes'
    drupal_ucfirst: '\Drupal\Component\Utility\Unicode::ucfirst'
    drupal_unlink: '\Drupal::service("file_system")->unlink'
    drupal_valid_path: '\Drupal::service("path.validator")->isValid'
    drupal_validate_form: '\Drupal::service("form_validator")->validateForm'
    drupal_validate_utf8: '\Drupal\Component\Utility\Unicode::validateUtf8'
    drupal_var_export: '\Drupal\Component\Utility\Variable::export'
    element_child: '\Drupal\Core\Render\Element::child'
    element_children: '\Drupal\Core\Render\Element::children'
    element_get_visible_children: '\Drupal\Core\Render\Element::getVisibleChildren'
    element_properties: '\Drupal\Core\Render\Element::properties'
    element_property: '\Drupal\Core\Render\Element::property'
    element_set_attributes: '\Drupal\Core\Render\Element::setAttributes'
    entity_info_cache_clear: '\Drupal::entityManager()->clearCachedDefinitions'
    field_attach_create_bundle: '\Drupal::entityManager()->onBundleCreate'
    field_attach_delete_bundle: '\Drupal::entityManager()->onBundleDelete'
    field_attach_rename_bundle: '\Drupal::entityManager()->onBundleRename'
    field_cache_clear: '\Drupal::entityManager()->clearCachedFieldDefinitions'
    field_info_cache_clear: '\Drupal::entityManager()->clearCachedBundles'
    field_info_field_settings: '\Drupal::service("plugin.manager.field.field_type")->getDefaultSettings'
    field_info_formatter_settings: '\Drupal::service("plugin.manager.field.formatter")->getDefaultSettings'
    field_info_instance_settings: '\Drupal::service("plugin.manager.field.field_type")->getDefaultInstanceSettings'
    field_info_widget_settings: '\Drupal::service("plugin.manager.field.widget")->getDefaultSettings'
    file_get_stream_wrappers: '\Drupal::service("stream_wrapper_manager")->getWrappers'
    file_stream_wrapper_get_class: '\Drupal::service("stream_wrapper_manager")->getClass'
    file_stream_wrapper_get_instance_by_uri: '\Drupal::service("stream_wrapper_manager")->getViaUri'
    file_stream_wrapper_get_instance_by_scheme: '\Drupal::service("stream_wrapper_manager")->getViaScheme'
    file_stream_wrapper_valid_scheme: '\Drupal::service("file_system")->validScheme'
    file_uri_scheme: '\Drupal::service("file_system")->uriScheme'
    filter_xss: '\Drupal\Component\Utility\Xss::filter'
    filter_xss_admin: '\Drupal\Component\Utility\Xss::filterAdmin'
    filter_xss_bad_protocol: '\Drupal\Component\Utility\UrlHelper::filterBadProtocol'
    form_get_cache: '\Drupal::formBuilder()->getCache'
    form_set_cache: '\Drupal::formBuilder()->setCache'
    format_interval: '\Drupal::service("date.formatter")->formatInterval'
    format_plural: '\Drupal::translation()->formatPlural'
    image_dimensions_scale: '\Drupal\Component\Image\Image::scaleDimensions'
    ip_address: '\Drupal::request()->getClientIp'
    lock_acquire: '\Drupal::lock()->acquire'
    lock_release: '\Drupal::lock()->release'
    lock_release_all: '\Drupal::lock()->releaseAll'
    lock_wait: '\Drupal::lock()->wait'
    menu_get_object: '\Drupal::routeMatch()->getParameter'
    menu_tree_output: '\Drupal::menuTree()->build'
    mime_header_decode: '\Drupal\Component\Utility\Unicode::mimeHeaderDecode'
    mime_header_encode: '\Drupal\Component\Utility\Unicode::mimeHeaderEncode'
    _module_build_dependencies: '\Drupal::moduleHandler()->buildModuleDependencies'
    module_exists: '\Drupal::moduleHandler()->moduleExists'
    module_hook: '\Drupal::moduleHandler()->implementsHook'
    module_implements: '\Drupal::moduleHandler()->getImplementations'
    module_implements_reset: '\Drupal::moduleHandler()->resetImplementations'
    module_install: '\Drupal::moduleHandler()->install'
    module_load_all_includes: '\Drupal::moduleHandler()->loadAllIncludes'
    module_uninstall: '\Drupal::moduleHandler()->uninstall'
    path_to_theme: '\Drupal::theme()->getActiveTheme()->getPath'
    taxonomy_get_tree: '\Drupal::entityManager()->getStorage("taxonomy_term")->loadTree'
    taxonomy_get_vocabularies: '\Drupal\taxonomy\Entity\Vocabulary::loadMultiple'
    taxonomy_term_load: '\Drupal::entityManager()->getStorage("taxonomy_term")->load'
    taxonomy_term_load_children: '\Drupal::entityManager()->getStorage("taxonomy_term")->loadChildren'
    taxonomy_term_load_parents: '\Drupal::entityManager()->getStorage("taxonomy_term")->loadParents'
    taxonomy_term_load_parents_all: '\Drupal::entityManager()->getStorage("taxonomy_term")->loadParentsAll'
    token_find_with_prefix: '\Drupal::token()->findWithPrefix'
    token_info: '\Drupal::token()->getInfo'
    token_generate: '\Drupal::token()->generate'
    token_replace: '\Drupal::token()->replace'
    token_scan: '\Drupal::token()->scan'
    truncate_utf8: '\Drupal\Component\Utility\Unicode::truncate'
    unicode_check: '\Drupal\Component\Utility\Unicode::check'
    url_is_external: '\Drupal\Component\Utility\UrlHelper::isExternal'
    user_authenticate: '\Drupal::service("user.auth")->authenticate'
    user_is_anonymous: '\Drupal::currentUser()->isAnonymous'
    user_is_logged_in: '\Drupal::currentUser()->isAuthenticated'

  # Common global constants were generally moved into classes and interfaces.
  # Each listed constant is replaced literally (no pre-processing) with the
  # replacement string. So for example, $node->foo[LANGUAGE_NONE] will be
  # replaced with:
  # $node->foo[\Drupal\Core\Language\Language::LANGCODE_NOT_SPECIFIED]
  constants:
    CACHE_PERMANENT: '\Drupal\Core\Cache\Cache::PERMANENT'
    COMMENT_FORM_BELOW: '\Drupal\comment\Plugin\Field\FieldType\CommentItem::FORM_BELOW'
    COMMENT_FORM_SEPARATE_PAGE: '\Drupal\comment\Plugin\Field\FieldType\CommentItem::FORM_SEPARATE_PAGE'
    COMMENT_MODE_FLAT: '\Drupal\comment\CommentManagerInterface::COMMENT_MODE_FLAT'
    DRUPAL_ANONYMOUS_RID: '\Drupal\Core\Session\AccountInterface::ANONYMOUS_ROLE'
    DRUPAL_AUTHENTICATED_RID: '\Drupal\Core\Session\AccountInterface::AUTHENTICATED_RID'
    DRUPAL_ROOT: '\Drupal::root()'
    FILE_CHMOD_DIRECTORY: '\Drupal\Core\File\FileSystem::CHMOD_DIRECTORY'
    FILE_CHMOD_FILE: '\Drupal\Core\File\FileSystem::CHMOD_FILE'
    LANGUAGE_LTR: '\Drupal\Core\Language\Language::LANGUAGE_LTR'
    LANGUAGE_NONE: '\Drupal\Core\Language\Language::LANGCODE_NOT_SPECIFIED'
    LANGUAGE_RTL: '\Drupal\Core\Language\Language::LANGUAGE_RTL'
    PREG_CLASS_UNICODE_WORD_BOUNDARY: '\Drupal\Component\Utility\Unicode::PREG_CLASS_WORD_BOUNDARY'
    UNICODE_ERROR: '\Drupal\Component\Utility\Unicode::STATUS_ERROR'
    UNICODE_MULTIBYTE: '\Drupal\Component\Utility\Unicode::STATUS_MULTIBYTE'
    UNICODE_SINGLEBYTE: '\Drupal\Component\Utility\Unicode::STATUS_SINGLEBYTE'
